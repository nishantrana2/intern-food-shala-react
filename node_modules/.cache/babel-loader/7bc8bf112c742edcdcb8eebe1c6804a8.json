{"ast":null,"code":"var _jsxFileName = \"/Users/nishantrana/Downloads/FoodShala-master/src/container/ExploreBuilder/AddMenu/AddMenu.js\";\nimport React, { Component } from \"react\";\nimport classes from \"./AddMenu.module.css\";\nimport { NavLink } from \"react-router-dom\";\nimport { getAddMenuError, getAddMenuPending, getAddMenuSuccess, getUser } from \"../../store/reducer\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport addMenuHandlerAction from \"../../bloc/addMenuHandler\";\nimport fetchProductsAction from \"../../bloc/fetchProducts\";\nimport { withRouter } from \"react-router-dom\";\nimport Input from \"../Input/Input\";\nimport Button from \"../UI/Button/Button\";\nimport Spinner from \"../UI/Spinner/Spinner\";\n\nclass AddMenu extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      primaryDetails: {\n        name: {\n          id: \"1\",\n          elementType: \"input\",\n          label: \"Food Name\",\n          elementConfig: {\n            type: \"text\",\n            placeholder: \"Value\"\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        },\n        itemDescription: {\n          id: \"2\",\n          elementType: \"input\",\n          label: \"Food Description\",\n          elementConfig: {\n            type: \"text\",\n            placeholder: \"Value\"\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        },\n        mealType: {\n          id: \"3\",\n          elementType: \"select\",\n          label: \"Meal Type\",\n          elementConfig: {\n            type: \"text\",\n            placeholder: \"Value\",\n            option: [{\n              value: \"\",\n              displayValue: \"Value\"\n            }, {\n              value: \"veg\",\n              displayValue: \"Veg\"\n            }, {\n              value: \"nonveg\",\n              displayValue: \"Non Veg\"\n            }]\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        },\n        price: {\n          id: \"4\",\n          elementType: \"input\",\n          label: \"Price\",\n          elementConfig: {\n            type: \"text\",\n            placeholder: \"Value\"\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        }\n      },\n      formIsValid: false,\n      errorText: \"\",\n      toggle: false\n    };\n\n    this.changeHandler = (event, identifierElement) => {\n      const updatedPrimaryDetails = { ...this.state.primaryDetails\n      };\n      const updatedPrimaryDetailsElement = { ...updatedPrimaryDetails[identifierElement]\n      };\n      updatedPrimaryDetailsElement.value = event.target.value;\n      updatedPrimaryDetailsElement.valid = this.checkValid(updatedPrimaryDetailsElement.value, updatedPrimaryDetailsElement.validation);\n      updatedPrimaryDetailsElement.touched = true;\n      updatedPrimaryDetails[identifierElement] = updatedPrimaryDetailsElement;\n      let formIsValid = true;\n\n      for (const item in updatedPrimaryDetails) {\n        formIsValid = updatedPrimaryDetails[item].valid && formIsValid;\n      }\n\n      this.setState({\n        primaryDetails: updatedPrimaryDetails,\n        formIsValid: formIsValid\n      });\n    };\n\n    this.addMenuHandler = () => {\n      const data = {};\n      data[\"name\"] = this.state.primaryDetails.name.value;\n      data[\"itemDescription\"] = this.state.primaryDetails.itemDescription.value;\n      data[\"mealType\"] = this.state.primaryDetails.mealType.value;\n      data[\"price\"] = +this.state.primaryDetails.price.value;\n      data[\"restaurantId\"] = this.props.user._id;\n      this.props.addMenuHandler(data, this.props.user);\n    };\n  }\n\n  checkValid(value, rules) {\n    let isValid = false;\n\n    if (rules && rules.required) {\n      isValid = value.trim() !== \"\";\n    }\n\n    if (rules && rules.minLength) {\n      isValid = isValid && value.trim().length >= rules.minLength;\n    }\n\n    return isValid;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.addMenu !== this.props.addMenu) {\n      if (this.props.addMenu) {\n        this.props.fetchProducts(this.props.user._id);\n        this.setState({\n          toggle: true\n        });\n      }\n    }\n\n    if (this.props.error !== prevProps.error && this.props.error !== null && this.state.formIsValid) {\n      this.setState({\n        errorText: \"Something went wrong please try again\"\n      });\n      const updatedPrimaryDetails = { ...this.state.primaryDetails\n      };\n\n      for (const field in updatedPrimaryDetails) {\n        updatedPrimaryDetails[field].value = \"\";\n      }\n\n      this.setState({\n        primaryDetails: updatedPrimaryDetails,\n        formIsValid: false\n      });\n    }\n  }\n\n  render() {\n    let formElements = [];\n\n    for (let item in this.state.primaryDetails) {\n      formElements.push({\n        id: item,\n        config: this.state.primaryDetails[item]\n      });\n    }\n\n    let button = /*#__PURE__*/React.createElement(Button, {\n      fill: true,\n      disabled: !this.state.formIsValid,\n      config: {\n        type: \"button\"\n      },\n      clicked: event => this.addMenuHandler(event),\n      name: this.props.pending ? /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 36\n        }\n      }) : \"Add To Menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 22\n      }\n    });\n    let form = formElements.map(formElement => {\n      return /*#__PURE__*/React.createElement(Input, {\n        key: formElement.id,\n        changed: event => this.changeHandler(event, formElement.id),\n        label: formElement.config.label,\n        elementType: formElement.config.elementType,\n        elementConfig: formElement.config.elementConfig,\n        value: formElement.config.value,\n        shouldValidate: formElement.config.validation,\n        invalid: !formElement.config.valid,\n        touched: formElement.config.touched,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }\n      });\n    });\n\n    if (this.state.toggle) {\n      form = /*#__PURE__*/React.createElement(\"h1\", {\n        style: {\n          color: \"green\",\n          width: \"100%\",\n          height: \"20rem\",\n          textAlign: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }\n      }, \" \", \"Successfully Added Meal\");\n      button = /*#__PURE__*/React.createElement(NavLink, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 18\n        }\n      }, \"MENU PAGE\");\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: classes.Heading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }\n    }, \"Add Menu Item\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: classes.SignInForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 21\n      }\n    }, this.state.errorText), form, button));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  addMenu: getAddMenuSuccess(state),\n  error: getAddMenuError(state),\n  pending: getAddMenuPending(state),\n  user: getUser(state)\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  addMenuHandler: addMenuHandlerAction,\n  fetchProducts: fetchProductsAction\n}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(AddMenu));","map":{"version":3,"sources":["/Users/nishantrana/Downloads/FoodShala-master/src/container/ExploreBuilder/AddMenu/AddMenu.js"],"names":["React","Component","classes","NavLink","getAddMenuError","getAddMenuPending","getAddMenuSuccess","getUser","connect","bindActionCreators","addMenuHandlerAction","fetchProductsAction","withRouter","Input","Button","Spinner","AddMenu","state","primaryDetails","name","id","elementType","label","elementConfig","type","placeholder","value","validation","required","valid","touched","itemDescription","mealType","option","displayValue","price","formIsValid","errorText","toggle","changeHandler","event","identifierElement","updatedPrimaryDetails","updatedPrimaryDetailsElement","target","checkValid","item","setState","addMenuHandler","data","props","user","_id","rules","isValid","trim","minLength","length","componentDidUpdate","prevProps","prevState","addMenu","fetchProducts","error","field","render","formElements","push","config","button","pending","form","map","formElement","color","width","height","textAlign","Heading","SignInForm","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport classes from \"./AddMenu.module.css\";\nimport { NavLink } from \"react-router-dom\";\n\nimport {\n    getAddMenuError,\n    getAddMenuPending,\n    getAddMenuSuccess,\n    getUser,\n} from \"../../store/reducer\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport addMenuHandlerAction from \"../../bloc/addMenuHandler\";\nimport fetchProductsAction from \"../../bloc/fetchProducts\";\n\nimport { withRouter } from \"react-router-dom\";\n\nimport Input from \"../Input/Input\";\nimport Button from \"../UI/Button/Button\";\nimport Spinner from \"../UI/Spinner/Spinner\";\n\nclass AddMenu extends Component {\n    state = {\n        primaryDetails: {\n            name: {\n                id: \"1\",\n                elementType: \"input\",\n                label: \"Food Name\",\n                elementConfig: {\n                    type: \"text\",\n                    placeholder: \"Value\",\n                },\n                value: \"\",\n                validation: {\n                    required: true,\n                },\n                valid: false,\n                touched: false,\n            },\n            itemDescription: {\n                id: \"2\",\n                elementType: \"input\",\n                label: \"Food Description\",\n                elementConfig: {\n                    type: \"text\",\n                    placeholder: \"Value\",\n                },\n                value: \"\",\n                validation: {\n                    required: true,\n                },\n                valid: false,\n                touched: false,\n            },\n            mealType: {\n                id: \"3\",\n                elementType: \"select\",\n                label: \"Meal Type\",\n                elementConfig: {\n                    type: \"text\",\n                    placeholder: \"Value\",\n                    option: [\n                        { value: \"\", displayValue: \"Value\" },\n                        {\n                            value: \"veg\",\n                            displayValue: \"Veg\",\n                        },\n                        {\n                            value: \"nonveg\",\n                            displayValue: \"Non Veg\",\n                        },\n                    ],\n                },\n                value: \"\",\n                validation: {\n                    required: true,\n                },\n                valid: false,\n                touched: false,\n            },\n            price: {\n                id: \"4\",\n                elementType: \"input\",\n                label: \"Price\",\n                elementConfig: {\n                    type: \"text\",\n                    placeholder: \"Value\",\n                },\n                value: \"\",\n                validation: {\n                    required: true,\n                },\n                valid: false,\n                touched: false,\n            },\n        },\n        formIsValid: false,\n        errorText: \"\",\n        toggle: false\n    };\n\n    checkValid(value, rules) {\n        let isValid = false;\n        if (rules && rules.required) {\n            isValid = value.trim() !== \"\";\n        }\n        if (rules && rules.minLength) {\n            isValid = isValid && value.trim().length >= rules.minLength;\n        }\n\n        return isValid;\n    }\n\n    changeHandler = (event, identifierElement) => {\n        const updatedPrimaryDetails = {\n            ...this.state.primaryDetails,\n        };\n\n        const updatedPrimaryDetailsElement = {\n            ...updatedPrimaryDetails[identifierElement],\n        };\n\n        updatedPrimaryDetailsElement.value = event.target.value;\n        updatedPrimaryDetailsElement.valid = this.checkValid(\n            updatedPrimaryDetailsElement.value,\n            updatedPrimaryDetailsElement.validation\n        );\n        updatedPrimaryDetailsElement.touched = true;\n        updatedPrimaryDetails[identifierElement] = updatedPrimaryDetailsElement;\n\n        let formIsValid = true;\n        for (const item in updatedPrimaryDetails) {\n            formIsValid = updatedPrimaryDetails[item].valid && formIsValid;\n        }\n\n        this.setState({\n            primaryDetails: updatedPrimaryDetails,\n            formIsValid: formIsValid,\n        });\n    };\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.addMenu !== this.props.addMenu) {\n            if (this.props.addMenu) {\n                this.props.fetchProducts(this.props.user._id);\n                this.setState({ toggle : true})\n\n            }\n        }\n        if (\n            this.props.error !== prevProps.error &&\n            this.props.error !== null &&\n            this.state.formIsValid\n        ) {\n            this.setState({\n                errorText: \"Something went wrong please try again\",\n            });\n            const updatedPrimaryDetails = {\n                ...this.state.primaryDetails,\n            };\n            for (const field in updatedPrimaryDetails) {\n                updatedPrimaryDetails[field].value = \"\";\n            }\n            this.setState({\n                primaryDetails: updatedPrimaryDetails,\n                formIsValid: false,\n            });\n        }\n    }\n\n    addMenuHandler = () => {\n        const data = {};\n\n        data[\"name\"] = this.state.primaryDetails.name.value;\n        data[\n            \"itemDescription\"\n        ] = this.state.primaryDetails.itemDescription.value;\n        data[\"mealType\"] = this.state.primaryDetails.mealType.value;\n        data[\"price\"] = +this.state.primaryDetails.price.value;\n        data[\"restaurantId\"] = this.props.user._id;\n\n        this.props.addMenuHandler(data, this.props.user);\n    };\n\n    render() {\n        let formElements = [];\n\n        for (let item in this.state.primaryDetails) {\n            formElements.push({\n                id: item,\n                config: this.state.primaryDetails[item],\n            });\n        }\n        let button = <Button\n        fill\n        disabled={!this.state.formIsValid}\n        config={{ type: \"button\" }}\n        clicked={(event) => this.addMenuHandler(event)}\n        name={this.props.pending ? <Spinner /> : \"Add To Menu\"}\n    />\n    let form = formElements.map((formElement) => {\n        return (\n            <Input\n                key={formElement.id}\n                changed={(event) =>\n                    this.changeHandler(event, formElement.id)\n                }\n                label={formElement.config.label}\n                elementType={formElement.config.elementType}\n                elementConfig={formElement.config.elementConfig}\n                value={formElement.config.value}\n                shouldValidate={formElement.config.validation}\n                invalid={!formElement.config.valid}\n                touched={formElement.config.touched}\n            />\n        );\n    });\n\n    if( this.state.toggle) {\n        form = (\n            <h1\n                style={{\n                    color: \"green\",\n                    width: \"100%\",\n                    height: \"20rem\",\n                    textAlign: \"center\",\n                }}\n            >\n                {\" \"}\n                Successfully Added Meal\n            </h1>\n        );\n        button = <NavLink\n       \n        to=\"/\"\n        \n    >\n        MENU PAGE\n    </NavLink>\n    }\n\n        \n        return (\n            <React.Fragment>\n                <span className={classes.Heading}>Add Menu Item</span>\n                <form className={classes.SignInForm}>\n                    <h5>{this.state.errorText}</h5>\n                    {form}\n                    {button}\n                    {/* <Button\n                        fill\n                        disabled={!this.state.formIsValid}\n                        config={{ type: \"button\" }}\n                        clicked={(event) => this.addMenuHandler(event)}\n                        name={this.props.pending ? <Spinner /> : \"Add To Menu\"}\n                    /> */}\n                </form>\n            </React.Fragment>\n        );\n    }\n}\nconst mapStateToProps = (state) => ({\n    addMenu: getAddMenuSuccess(state),\n    error: getAddMenuError(state),\n    pending: getAddMenuPending(state),\n    user: getUser(state),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators(\n        {\n            addMenuHandler: addMenuHandlerAction,\n            fetchProducts: fetchProductsAction,\n        },\n        dispatch\n    );\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(withRouter(AddMenu));\n"]},"metadata":{},"sourceType":"module"}