{"ast":null,"code":"var _jsxFileName = \"/Users/nishantrana/Downloads/FoodShala-master/src/components/Customer/CustomerSignUp.js\";\nimport React, { Component } from \"react\";\nimport classes from \"../CustomerSignUp.module.css\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { NavLink } from \"react-router-dom\";\nimport customerSignUpAction from \"../../bloc/auth/customerSignUp\";\nimport { getCustomerError, getCustomerPending, getCustomerSuccess } from \"../../store/reducer\";\nimport Input from \"../Input/Input\";\nimport Button from \"../UI/Button/Button\";\nimport Spinner from \"../UI/Spinner/Spinner\";\n\nclass CustomerSignUp extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      primaryDetails: {\n        restaurantName: {\n          id: \"3\",\n          elementType: \"input\",\n          label: \"Restaurant Name\",\n          elementConfig: {\n            type: \"text\",\n            placeholder: \"Value\"\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        },\n        username: {\n          id: \"4\",\n          elementType: \"input\",\n          label: \"User Name\",\n          elementConfig: {\n            type: \"text\",\n            placeholder: \"Value\"\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        },\n        password: {\n          id: \"5\",\n          elementType: \"input\",\n          label: \"Password\",\n          elementConfig: {\n            type: \"password\",\n            placeholder: \"Value\"\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        }\n      },\n      formIsValid: false,\n      errorText: \"\"\n    };\n\n    this.changeHandler = (event, identifierElement) => {\n      const updatedPrimaryDetails = { ...this.state.primaryDetails\n      };\n      const updatedPrimaryDetailsElement = { ...updatedPrimaryDetails[identifierElement]\n      };\n      updatedPrimaryDetailsElement.value = event.target.value;\n      updatedPrimaryDetailsElement.valid = this.checkValid(updatedPrimaryDetailsElement.value, updatedPrimaryDetailsElement.validation);\n      updatedPrimaryDetailsElement.touched = true;\n      updatedPrimaryDetails[identifierElement] = updatedPrimaryDetailsElement;\n      let formIsValid = true;\n\n      for (const item in updatedPrimaryDetails) {\n        if (updatedPrimaryDetails[item].tagHandler) {\n          formIsValid = updatedPrimaryDetails[item].selected.length > 0 && formIsValid;\n          continue;\n        }\n\n        formIsValid = updatedPrimaryDetails[item].valid && formIsValid;\n      }\n\n      this.setState({\n        primaryDetails: updatedPrimaryDetails,\n        formIsValid: formIsValid\n      });\n    };\n\n    this.addItemToCheck = identifierElement => {\n      if (this.state.primaryDetails[identifierElement].valid) {\n        const updatedPrimaryDetails = { ...this.state.primaryDetails\n        };\n        const updatedPrimaryDetailsElement = { ...updatedPrimaryDetails[identifierElement]\n        };\n        updatedPrimaryDetailsElement.selected.push(updatedPrimaryDetailsElement.value);\n        updatedPrimaryDetailsElement.value = \"\";\n        updatedPrimaryDetailsElement.valid = false;\n        updatedPrimaryDetailsElement.touched = false;\n        updatedPrimaryDetails[identifierElement] = updatedPrimaryDetailsElement;\n        let formIsValid = true;\n\n        for (const item in updatedPrimaryDetails) {\n          if (typeof updatedPrimaryDetails[item] === \"string\") continue;\n\n          if (updatedPrimaryDetails[item].tagHandler) {\n            formIsValid = updatedPrimaryDetails[item].selected.length > 0 && formIsValid;\n            continue;\n          }\n\n          formIsValid = updatedPrimaryDetails[item].valid && formIsValid;\n        }\n\n        this.setState({\n          primaryDetails: updatedPrimaryDetails,\n          formIsValid: formIsValid\n        });\n      }\n    };\n\n    this.removeItemFromCheck = (index, identifierElement) => {\n      const updatedPrimaryDetails = { ...this.state.primaryDetails\n      };\n      const updatedPrimaryDetailsElement = { ...updatedPrimaryDetails[identifierElement]\n      };\n      updatedPrimaryDetailsElement.selected = this.state.primaryDetails[identifierElement].selected.filter((ele, i) => i !== index);\n      updatedPrimaryDetails[identifierElement] = updatedPrimaryDetailsElement;\n      let formIsValid = true;\n\n      for (const item in updatedPrimaryDetails) {\n        if (updatedPrimaryDetails[item].tagHandler) {\n          formIsValid = updatedPrimaryDetails[item].selected.length > 0 && formIsValid;\n          continue;\n        }\n\n        formIsValid = updatedPrimaryDetails[item].valid && formIsValid;\n      }\n\n      this.setState({\n        primaryDetails: updatedPrimaryDetails,\n        formIsValid: formIsValid\n      });\n    };\n\n    this.clientSignUpHandler = event => {\n      event.preventDefault();\n      const data = {};\n\n      for (let field in this.state.primaryDetails) {\n        if (this.state.primaryDetails[field].isTag) {\n          data[field] = this.state.primaryDetails[field].selected;\n          continue;\n        }\n\n        data[field] = this.state.primaryDetails[field].value;\n      }\n\n      data[\"accountType\"] = \"Restaurant\";\n      this.props.customerSignUp(data);\n    };\n  }\n\n  checkValid(value, rules) {\n    let isValid = false;\n\n    if (rules && rules.required) {\n      isValid = value.trim() !== \"\";\n    }\n\n    if (rules && rules.minLength) {\n      isValid = isValid && value.trim().length >= rules.minLength;\n    }\n\n    return isValid;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.auth !== prevProps.auth) {\n      this.setState({\n        auth: true\n      });\n    } else if (this.props.error !== prevProps.error) {\n      this.setState({\n        errorText: \"UserName is already taken.\"\n      });\n      const updatedPrimaryDetails = { ...this.state.primaryDetails\n      };\n\n      for (let field in updatedPrimaryDetails) {\n        updatedPrimaryDetails[field].value = \"\";\n      }\n\n      this.setState({\n        primaryDetails: updatedPrimaryDetails,\n        formIsValid: false\n      });\n    }\n  }\n\n  render() {\n    let formElements = [];\n\n    for (let item in this.state.primaryDetails) {\n      formElements.push({\n        id: item,\n        config: this.state.primaryDetails[item]\n      });\n    }\n\n    let button = /*#__PURE__*/React.createElement(Button, {\n      fill: true,\n      disabled: !this.state.formIsValid,\n      config: {\n        type: \"button\"\n      },\n      clicked: event => this.clientSignUpHandler(event),\n      name: this.props.pending ? /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 36\n        }\n      }) : \"Sign Up\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 22\n      }\n    });\n    let form = formElements.map(formElement => {\n      return /*#__PURE__*/React.createElement(Input, {\n        key: formElement.id,\n        changed: event => this.changeHandler(event, formElement.id),\n        label: formElement.config.label,\n        elementType: formElement.config.elementType,\n        elementConfig: formElement.config.elementConfig,\n        value: formElement.config.value,\n        addTag: () => this.addItemToCheck(formElement.id),\n        removeTag: index => {\n          this.removeItemFromCheck(index, formElement.id);\n        },\n        isTag: formElement.config.tagHandler,\n        selected: formElement.config.selected,\n        analyzeText: formElement.config.analyzeText,\n        shouldValidate: formElement.config.validation,\n        invalid: !formElement.config.valid,\n        touched: formElement.config.touched,\n        actions: formElement.config.actions,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 17\n        }\n      });\n    });\n\n    if (this.state.auth) {\n      form = /*#__PURE__*/React.createElement(\"h1\", {\n        style: {\n          color: \"green\",\n          width: \"100%\",\n          height: \"20rem\",\n          textAlign: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 17\n        }\n      }, \" \", \"Successfully Registered\");\n      button = /*#__PURE__*/React.createElement(NavLink, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 22\n        }\n      }, \"Home\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: classes.Customer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 17\n      }\n    }, this.state.errorText), form, button);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  error: getCustomerError(state),\n  pending: getCustomerPending(state),\n  auth: getCustomerSuccess(state)\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  customerSignUp: customerSignUpAction\n}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomerSignUp);","map":{"version":3,"sources":["/Users/nishantrana/Downloads/FoodShala-master/src/components/Customer/CustomerSignUp.js"],"names":["React","Component","classes","connect","bindActionCreators","NavLink","customerSignUpAction","getCustomerError","getCustomerPending","getCustomerSuccess","Input","Button","Spinner","CustomerSignUp","state","primaryDetails","restaurantName","id","elementType","label","elementConfig","type","placeholder","value","validation","required","valid","touched","username","password","formIsValid","errorText","changeHandler","event","identifierElement","updatedPrimaryDetails","updatedPrimaryDetailsElement","target","checkValid","item","tagHandler","selected","length","setState","addItemToCheck","push","removeItemFromCheck","index","filter","ele","i","clientSignUpHandler","preventDefault","data","field","isTag","props","customerSignUp","rules","isValid","trim","minLength","componentDidUpdate","prevProps","prevState","auth","error","render","formElements","config","button","pending","form","map","formElement","analyzeText","actions","color","width","height","textAlign","Customer","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport classes from \"../CustomerSignUp.module.css\";\n\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { NavLink } from \"react-router-dom\";\nimport customerSignUpAction from \"../../bloc/auth/customerSignUp\";\nimport {\n    getCustomerError,\n    getCustomerPending,\n    getCustomerSuccess,\n} from \"../../store/reducer\";\n\nimport Input from \"../Input/Input\";\nimport Button from \"../UI/Button/Button\";\nimport Spinner from \"../UI/Spinner/Spinner\";\n\nclass CustomerSignUp extends Component {\n    state = {\n        primaryDetails: {\n            restaurantName: {\n                id: \"3\",\n                elementType: \"input\",\n                label: \"Restaurant Name\",\n                elementConfig: {\n                    type: \"text\",\n                    placeholder: \"Value\",\n                },\n                value: \"\",\n                validation: {\n                    required: true,\n                },\n                valid: false,\n                touched: false,\n            },\n            username: {\n                id: \"4\",\n                elementType: \"input\",\n                label: \"User Name\",\n                elementConfig: {\n                    type: \"text\",\n                    placeholder: \"Value\",\n                },\n                value: \"\",\n                validation: {\n                    required: true,\n                },\n                valid: false,\n                touched: false,\n            },\n            password: {\n                id: \"5\",\n                elementType: \"input\",\n                label: \"Password\",\n                elementConfig: {\n                    type: \"password\",\n                    placeholder: \"Value\",\n                },\n                value: \"\",\n                validation: {\n                    required: true,\n                },\n                valid: false,\n                touched: false,\n            },\n            \n        },\n\n        formIsValid: false,\n        errorText: \"\"\n    };\n    checkValid(value, rules) {\n        let isValid = false;\n        if (rules && rules.required) {\n            isValid = value.trim() !== \"\";\n        }\n        if (rules && rules.minLength) {\n            isValid = isValid && value.trim().length >= rules.minLength;\n        }\n\n        return isValid;\n    }\n\n    changeHandler = (event, identifierElement) => {\n        const updatedPrimaryDetails = {\n            ...this.state.primaryDetails,\n        };\n\n        const updatedPrimaryDetailsElement = {\n            ...updatedPrimaryDetails[identifierElement],\n        };\n\n        updatedPrimaryDetailsElement.value = event.target.value;\n        updatedPrimaryDetailsElement.valid = this.checkValid(\n            updatedPrimaryDetailsElement.value,\n            updatedPrimaryDetailsElement.validation\n        );\n        updatedPrimaryDetailsElement.touched = true;\n        updatedPrimaryDetails[identifierElement] = updatedPrimaryDetailsElement;\n\n        let formIsValid = true;\n        for (const item in updatedPrimaryDetails) {\n            if (updatedPrimaryDetails[item].tagHandler) {\n                formIsValid =\n                    updatedPrimaryDetails[item].selected.length > 0 &&\n                    formIsValid;\n                continue;\n            }\n            formIsValid = updatedPrimaryDetails[item].valid && formIsValid;\n        }\n\n        this.setState({\n            primaryDetails: updatedPrimaryDetails,\n            formIsValid: formIsValid,\n        });\n    };\n\n    addItemToCheck = (identifierElement) => {\n        if (this.state.primaryDetails[identifierElement].valid) {\n            const updatedPrimaryDetails = {\n                ...this.state.primaryDetails,\n            };\n\n            const updatedPrimaryDetailsElement = {\n                ...updatedPrimaryDetails[identifierElement],\n            };\n\n            updatedPrimaryDetailsElement.selected.push(\n                updatedPrimaryDetailsElement.value\n            );\n            updatedPrimaryDetailsElement.value = \"\";\n            updatedPrimaryDetailsElement.valid = false;\n            updatedPrimaryDetailsElement.touched = false;\n            updatedPrimaryDetails[\n                identifierElement\n            ] = updatedPrimaryDetailsElement;\n            let formIsValid = true;\n            for (const item in updatedPrimaryDetails) {\n                if (typeof updatedPrimaryDetails[item] === \"string\") continue;\n                if (updatedPrimaryDetails[item].tagHandler) {\n                    formIsValid =\n                        updatedPrimaryDetails[item].selected.length > 0 &&\n                        formIsValid;\n                    continue;\n                }\n                formIsValid = updatedPrimaryDetails[item].valid && formIsValid;\n            }\n\n            this.setState({\n                primaryDetails: updatedPrimaryDetails,\n                formIsValid: formIsValid,\n            });\n        }\n    };\n\n    removeItemFromCheck = (index, identifierElement) => {\n        const updatedPrimaryDetails = {\n            ...this.state.primaryDetails,\n        };\n\n        const updatedPrimaryDetailsElement = {\n            ...updatedPrimaryDetails[identifierElement],\n        };\n\n        updatedPrimaryDetailsElement.selected = this.state.primaryDetails[\n            identifierElement\n        ].selected.filter((ele, i) => i !== index);\n\n        updatedPrimaryDetails[identifierElement] = updatedPrimaryDetailsElement;\n\n        let formIsValid = true;\n\n        for (const item in updatedPrimaryDetails) {\n            if (updatedPrimaryDetails[item].tagHandler) {\n                formIsValid =\n                    updatedPrimaryDetails[item].selected.length > 0 &&\n                    formIsValid;\n                continue;\n            }\n            formIsValid = updatedPrimaryDetails[item].valid && formIsValid;\n        }\n\n        this.setState({\n            primaryDetails: updatedPrimaryDetails,\n            formIsValid: formIsValid,\n        });\n    };\n\n    clientSignUpHandler = (event) => {\n        event.preventDefault();\n        const data = {};\n\n        for (let field in this.state.primaryDetails) {\n            if (this.state.primaryDetails[field].isTag) {\n                data[field] = this.state.primaryDetails[field].selected;\n                continue;\n            }\n            data[field] = this.state.primaryDetails[field].value;\n        }\n\n        data[\"accountType\"] = \"Restaurant\";\n\n        \n\n        this.props.customerSignUp(data);\n    };\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.props.auth !== prevProps.auth) {\n            this.setState({ auth: true });\n            \n        } else if (this.props.error !== prevProps.error) {\n            this.setState({\n                errorText: \"UserName is already taken.\",\n            });\n            const updatedPrimaryDetails = {\n                ...this.state.primaryDetails,\n            };\n            for (let field in updatedPrimaryDetails) {\n                updatedPrimaryDetails[field].value = \"\";\n            }\n\n            this.setState({\n                primaryDetails: updatedPrimaryDetails,\n                formIsValid: false,\n            });\n        }\n\n    }\n\n    render() {\n        let formElements = [];\n\n        for (let item in this.state.primaryDetails) {\n            formElements.push({\n                id: item,\n                config: this.state.primaryDetails[item],\n            });\n        }\n\n        let button = <Button\n        fill\n        disabled={!this.state.formIsValid}\n        config={{ type: \"button\" }}\n        clicked={(event) => this.clientSignUpHandler(event)}\n        name={this.props.pending ? <Spinner /> : \"Sign Up\"}\n          />\n\n        \n        let form = formElements.map((formElement) => {\n            return (\n                <Input\n                    key={formElement.id}\n                    changed={(event) =>\n                        this.changeHandler(event, formElement.id)\n                    }\n                    label={formElement.config.label}\n                    elementType={formElement.config.elementType}\n                    elementConfig={formElement.config.elementConfig}\n                    value={formElement.config.value}\n                    addTag={() => this.addItemToCheck(formElement.id)}\n                    removeTag={(index) => {\n                        this.removeItemFromCheck(index, formElement.id);\n                    }}\n                    isTag={formElement.config.tagHandler}\n                    selected={formElement.config.selected}\n                    analyzeText={formElement.config.analyzeText}\n                    shouldValidate={formElement.config.validation}\n                    invalid={!formElement.config.valid}\n                    touched={formElement.config.touched}\n                    actions={formElement.config.actions}\n                />\n            );\n        });\n        if (this.state.auth) {\n            form = (\n                <h1\n                    style={{\n                        color: \"green\",\n                        width: \"100%\",\n                        height: \"20rem\",\n                        textAlign: \"center\",\n                    }}\n                >\n                    {\" \"}\n                    Successfully Registered\n                </h1>\n            );\n            button = <NavLink\n       \n            to=\"/\"\n            \n        >\n            Home\n        </NavLink>\n            \n        }\n\n\n        return (\n            <form className={classes.Customer}>\n                <h5>{this.state.errorText}</h5>\n            \n                {form}\n                {button}\n                \n            </form>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    error: getCustomerError(state),\n    pending: getCustomerPending(state),\n    auth: getCustomerSuccess(state),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators(\n        {\n            customerSignUp: customerSignUpAction,\n        },\n        dispatch\n    );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomerSignUp);\n"]},"metadata":{},"sourceType":"module"}